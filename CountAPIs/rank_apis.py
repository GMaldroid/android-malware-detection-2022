import json


top = 1000
folder_names = ['Adware_600', 'Banking_600', 'Benign_600', 'Riskware_600', 'SMS_600']
for folder_name in folder_names:
    apis_in_class = json.load(open(f"./output/All_APIs_in_{folder_name}.json", "r"))
    apis = []
    for key in apis_in_class.keys():
        apis.append({
            'api_name': key,
            'call_num': apis_in_class[key]['call_num'],
            'app_num': apis_in_class[key]['app_num'],
        })
    apis.sort(key=lambda x: x["app_num"], reverse=True)
    print(f'{folder_name}: {len(apis)}')
    open(f"./output/Top_{top}_APIs_in_{folder_name}.json", "w").write(json.dumps(apis[:top], indent=4))
